<div class="d-flex" id="wrapper">
	<!-- Sidebar -->
	<app-sidebar></app-sidebar>

	<!-- Contenido de la pagina -->
	<div id="page-content-wrapper">
		<div class="container-fluid my-5">
			<div class="row">
				<div class="col">
					<!-- Cuerpo de las ofertas -->
					<div class="card w-100 mb-4 shadow">
						<div class="card-header bg-secondary">
							<div class="d-flex align-items-center">
								<h2 class="card-title text-white font-weight-bold my-2 mr-3">Mis ofertas</h2>
								<div class="custom-control custom-switch" (change)="activeOffer()">
									<input type="checkbox" class="custom-control-input" id="activeOffer" checked />
									<label class="custom-control-label" for="activeOffer" id="labelActiveOffer">Activas</label>
								</div>
								<input class="form-control ml-auto w-25" type="text" name="search" [(ngModel)]="searchText" autocomplete="off" placeholder="Buscar" />
							</div>
							<a class="rounded-circle position-absolute border border-white bg-secondary" (click)="offerNew()">
								<svg class="bi text-white" width="32" height="32" fill="currentColor">
									<use xlink:href="bootstrap-icons.svg#plus" />
								</svg>
							</a>
						</div>
						<div class="card-body mt-2">
							<!-- Oferta -->
							<div class="row">
								<!-- Se muestra para las ofertas activas -->
								<ng-container *ngIf="active">
									<div class="col-12 col-sm-6" *ngFor="let offer of actOffers | slice: (page - 1) * pageSize:page * pageSize | filter: searchText">
										<div class="card m-2 mb-4 border-secondary shadow">
											<div class="card-header bg-secondary text-white">
												<h3 class="card-title font-weight-bolder border-bottom">{{ offer.name }}</h3>
												<span class="badge badge-light text-secondary mr-2">{{ offer.areaDescription }}</span>
												<span class="text-white font-weight-bolder">Vacantes: {{ offer.vacant }}</span>
											</div>
											<div class="card-body">
												<div class="row mb-4">
													<div class="col">
														<p class="text-primary">Fecha de finalización: {{ offer.endDate }}</p>
														<p class="card-text">{{ offer.description }}</p>
													</div>
												</div>
												<div class="row border-top pt-3">
													<div class="col text-center">
														<p class="display-3 font-weight-bolder mb-0 text-danger">5</p>
														<p class="text-secondary">Interesados</p>
													</div>
													<div class="col text-center">
														<p class="display-3 font-weight-bolder mb-0 text-success">15</p>
														<p class="text-secondary">Seleccionados</p>
													</div>
												</div>
											</div>
											<div class="card-footer p-0">
												<div class="btn-group w-100">
													<button type="button" class="btn btn-secondary rounded-0">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerUpdate(offer)">
															<use xlink:href="bootstrap-icons.svg#pencil" />
														</svg>
													</button>
													<button type="button" class="btn btn-secondary">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerDuplicate(offer)">
															<use xlink:href="bootstrap-icons.svg#files" />
														</svg>
													</button>
													<button type="button" class="btn btn-secondary rounded-0">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerDelete(offer.id)">
															<use xlink:href="bootstrap-icons.svg#x" />
														</svg>
													</button>
													<button type="button" class="btn btn-secondary rounded-0">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="studentsList(offer.id, offer.name)">
															<use xlink:href="bootstrap-icons.svg#file-earmark-plus" />
														</svg>
													</button>
													<button type="button" class="btn btn-success rounded-0">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerDesactive(offer.id)">
															<use xlink:href="bootstrap-icons.svg#check-square" />
														</svg>
													</button>
												</div>
											</div>
										</div>
									</div>
								</ng-container>
								<!-- Se muestra para las ofertas -->
								<ng-container *ngIf="!active">
									<div class="col-sm-6" *ngFor="let offer of desOffers | slice: (page - 1) * pageSize:page * pageSize | filter: searchText">
										<div class="card m-2 mb-4 border-secondary shadow">
											<div class="card-header bg-secondary text-white">
												<h3 class="card-title font-weight-bolder border-bottom">{{ offer.name }}</h3>
												<span class="badge badge-light text-secondary mr-2">{{ offer.areaDescription }}</span>
												<span class="text-white font-weight-bolder">Vacantes: {{ offer.vacant }}</span>
											</div>
											<div class="card-body">
												<div class="row mb-4">
													<div class="col">
														<p class="text-primary">Fecha de finalización: {{ offer.endDate }}</p>
														<p class="card-text">{{ offer.description }}</p>
													</div>
												</div>
												<div class="row border-top pt-3">
													<div class="col text-center">
														<p class="display-3 font-weight-bolder mb-0 text-danger">5</p>
														<p class="text-secondary">Interesados</p>
													</div>
													<div class="col text-center">
														<p class="display-3 font-weight-bolder mb-0 text-success">15</p>
														<p class="text-secondary">Seleccionados</p>
													</div>
												</div>
											</div>
											<div class="card-footer p-0">
												<div class="btn-group w-100">
													<button type="button" class="btn btn-secondary rounded-0">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerUpdate(offer)">
															<use xlink:href="bootstrap-icons.svg#pencil" />
														</svg>
													</button>
													<button type="button" class="btn btn-secondary">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerDuplicate(offer)">
															<use xlink:href="bootstrap-icons.svg#files" />
														</svg>
													</button>
													<button type="button" class="btn btn-secondary rounded-0">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerDelete(offer.id)">
															<use xlink:href="bootstrap-icons.svg#x" />
														</svg>
													</button>
													<button type="button" class="btn btn-danger rounded-0">
														<svg class="bi" width="26" height="26" fill="currentColor" (click)="offerActive(offer.id)">
															<use xlink:href="bootstrap-icons.svg#square" />
														</svg>
													</button>
												</div>
											</div>
										</div>
									</div>
								</ng-container>
							</div>
						</div>
						<div *ngIf="!active" class="card-footer">
							<ngb-pagination [(page)]="page" [pageSize]="pageSize" [collectionSize]="desOffers.length" [boundaryLinks]="true"></ngb-pagination>
						</div>
						<div *ngIf="active" class="card-footer">
							<ngb-pagination [(page)]="page" [pageSize]="pageSize" [collectionSize]="actOffers.length" [boundaryLinks]="true"></ngb-pagination>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
